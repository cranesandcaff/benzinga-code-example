<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Documentation Module: Portfolio</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	
	<link type="text/css" rel="stylesheet" href="styles/site.flatly.css">
	
</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">Documentation</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="module-PortfolioCtrl.PortfolioScope.html">PortfolioScope</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="module-benzingaStockExchangeApp.html">benzingaStockExchangeApp</a>
						</li>
						
						<li>
							<a href="module-FlashService.html">FlashService</a>
						</li>
						
						<li>
							<a href="module-Portfolio.html">Portfolio</a>
						</li>
						
						<li>
							<a href="module-PortfolioCtrl.html">PortfolioCtrl</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
		<div class="span8">
			
				<div id="main">
					


	<h1 class="page-title">Module: Portfolio</h1>
<section>

<header>
    <h2>
    Portfolio
    </h2>
    
</header>

<article>
    <div class="container-overview">
    

    
        
            <div class="description">Portfolio Factory returns the Portfolio object. In AngularJS a factory returns a value.
The portfolio object contains the users balance, their owned stock in an array under the owned property
and has the methods for interacting with itself.</div>
        

        
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Portfolio.js.html">portfolio/Portfolio.js</a>, <a href="Portfolio.js.html#sunlight-1-line-1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
    
    </div>

    

    

    
        <h3 class="subsection-title">Requires</h3>

        <ul>
            <li>module:lodash</li>
        
            <li>module:$http</li>
        
            <li><a href="module-FlashService.html">module:FlashService</a></li>
        
            <li>module:$sessionStorage</li>
        </ul>
    

    

    

    
        <h3 class="subsection-title">Members</h3>

        <dl>
            
<dt>
    <h4 class="name" id="balance"><span class="type-signature">&lt;inner> </span>balance<span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    <div class="description">
        Initialize with a balance of 100,000
    </div>
    
    
    

    
<dl class="details">
    

        <h5 class="subsection-title">Properties:</h5>

        <dl>

<table class="props table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>balance</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The current balance in the users portfolio.</td>
        </tr>

	
	</tbody>
</table>
</dl>

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Portfolio.js.html">portfolio/Portfolio.js</a>, <a href="Portfolio.js.html#sunlight-1-line-19">line 19</a>
    </li></ul></dd>
    

    

    

    
</dl>

    
    
</dd>

        
            
<dt>
    <h4 class="name" id="owned"><span class="type-signature">&lt;inner> </span>owned<span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    <div class="description">
        The array for owned stock to be placed in.
    </div>
    
    
    

    
<dl class="details">
    

        <h5 class="subsection-title">Properties:</h5>

        <dl>

<table class="props table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>owned</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            

            

            <td class="description last">Array of currently owned stock.</td>
        </tr>

	
	</tbody>
</table>
</dl>

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Portfolio.js.html">portfolio/Portfolio.js</a>, <a href="Portfolio.js.html#sunlight-1-line-32">line 32</a>
    </li></ul></dd>
    

    

    

    
</dl>

    
    
</dd>

        
            
<dt>
    <h4 class="name" id="potential"><span class="type-signature">&lt;inner> </span>potential<span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    <div class="description">
        On init we are not viewing anything so this is set to false so that it hides the template.
There isn't a method to hide the method except on page reload. I couldn't really imagine
a scenario where it needed to be cleared or what would replace it.
    </div>
    
    
    

    
<dl class="details">
    

        <h5 class="subsection-title">Properties:</h5>

        <dl>

<table class="props table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>potential</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">Either false on init or the current Stock being considered.</td>
        </tr>

	
	</tbody>
</table>
</dl>

    

    

    

    

    

    

    

    

    
    <dt class="tag-default">Default Value:</dt>
    <dd class="tag-default"><ul class="dummy"><li>100000</li></ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Portfolio.js.html">portfolio/Portfolio.js</a>, <a href="Portfolio.js.html#sunlight-1-line-27">line 27</a>
    </li></ul></dd>
    

    

    

    
</dl>

    
    
</dd>

        </dl>
    

    
        <h3 class="subsection-title">Methods</h3>

        <dl>
            
<dt>
    <h4 class="name" id="buy"><span class="type-signature">&lt;inner> </span>buy<span class="signature">(stockDetails, quantity)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Public function used in controller. We create a new object by using lodash's <a href="http://lodash.com/docs#pick">pick</a> method to select the stock symbol, name, asking and bidding price.
The remaining information from the API is assigned to a details property on the stock object, in case it is needed in the future. We create the new object to help prevent API changes from causing future breakages. An unversioned API and lack of control over it still leaves the app very vulnerable to third party changes.
If the balance following the transaction would be less than 0 we use the <a href="module-FlashService.html">FlashService</a> to create an error message.
Following a successful transaction we run the Portfolio.store() method to save the portfolio to sessionStorage         .
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>stockDetails</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">The details of the stock object.</td>
        </tr>

	

        <tr>
            
                <td class="name"><code>quantity</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Quantity specified in transaction</td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Portfolio.js.html">portfolio/Portfolio.js</a>, <a href="Portfolio.js.html#sunlight-1-line-117">line 117</a>
    </li></ul></dd>
    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="init"><span class="type-signature">&lt;inner> </span>init<span class="signature">()</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Check if there is anything in session storage under the name space. Uses lodash to <a href="http://lodash.com/docs#merge">merge</a> the existing portfolio if it exists into
    </div>
    

    
    
    
        <h5>This:</h5>
        <ul><li>Portfolio</li></ul>
    
    
    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Portfolio.js.html">portfolio/Portfolio.js</a>, <a href="Portfolio.js.html#sunlight-1-line-37">line 37</a>
    </li></ul></dd>
    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="search"><span class="type-signature">&lt;inner> </span>search<span class="signature">(sym)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Use Angulars $http service to get stock data from Benzinga API
    </div>
    

    
    
    
        <h5>This:</h5>
        <ul><li>Portfolio</li></ul>
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>sym</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Stock symbol user is searching for.</td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Portfolio.js.html">portfolio/Portfolio.js</a>, <a href="Portfolio.js.html#sunlight-1-line-55">line 55</a>
    </li></ul></dd>
    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="sell"><span class="type-signature">&lt;inner> </span>sell<span class="signature">(stockDetails, quantity)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Public function used in controller.
We need to check that the user owns the stock they intend to sell, after that we need to check that they have enough stock to sell the amount in question.
This is somewhat duplicative, as the transaction method also checks to see if the stock is owned. I considered some solutions to decrease this duplication
however nothing really struck out as a way to reduce this duplication, at least not in the timeframe I wanted to finish the project in.
We flash an error message if they don't have enough of the stock or if they don't own the stock at all.
Following a successful transaction we run the Portfolio.store() method to save the portfolio to sessionStorage.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>stockDetails</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">The details of the stock object.</td>
        </tr>

	

        <tr>
            
                <td class="name"><code>quantity</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Quantity specified in transaction</td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Portfolio.js.html">portfolio/Portfolio.js</a>, <a href="Portfolio.js.html#sunlight-1-line-140">line 140</a>
    </li></ul></dd>
    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="store"><span class="type-signature">&lt;inner> </span>store<span class="signature">()</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Use the ngStorage module and sessionStorage object to store the balance and stock owned.
Nothing else really needs to be serialized, unless we want to store the last stock watched.
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Portfolio.js.html">portfolio/Portfolio.js</a>, <a href="Portfolio.js.html#sunlight-1-line-45">line 45</a>
    </li></ul></dd>
    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="transaction"><span class="type-signature">&lt;inner> </span>transaction<span class="signature">(stock, quantity, purchase)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Private function used by the Portfolio object.
We check to see if the stock symbol exists in Portfolio.owned array using lodash's <a href="http://lodash.com/docs#some "> some method</a>, if it exists we select it from the array.
If it does not exist we create a transactionHistory property as an empty array, we also push the transaction into Portfolio.owned
Once we have our stock object with the transactionHistory array we push the quantity, current asking price and the purchase boolean
into that array, finally we call the Portfolio.vwap function and assign the resulting Value Weighted Average Price to the vwap property of the stock object.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>stock</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">The stock we are performing a transaction on.</td>
        </tr>

	

        <tr>
            
                <td class="name"><code>quantity</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Quantity specified in transaction</td>
        </tr>

	

        <tr>
            
                <td class="name"><code>purchase</code></td>
            

            <td class="type">
            
                
<span class="param-type">bool</span>


            
            </td>

            

            

            <td class="description last">Indicates which direction the transaction is going in.</td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Portfolio.js.html">portfolio/Portfolio.js</a>, <a href="Portfolio.js.html#sunlight-1-line-98">line 98</a>
    </li></ul></dd>
    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="vwap"><span class="type-signature">&lt;inner> </span>vwap<span class="signature">(stock)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        An <a href="http://jsperf.com/jquery-foreach-vs-for/8">optimized for loop</a> iterates over the transaction history
It sums the transacted quantity into the stockMoved variable in order to divide over it later in the method
The average price is generated by adding the result of each transactions quanity by the price paid that time
The total amount of stock is generated by first checking to see if the transaction was a purchase
If it was we simply add the quantity, if it was not then it had we add the negative of the quantity.
It also sets the quantity on the stock object.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>stock</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">The stock we are averaging the price for.</td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Portfolio.js.html">portfolio/Portfolio.js</a>, <a href="Portfolio.js.html#sunlight-1-line-75">line 75</a>
    </li></ul></dd>
    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    the sum of the average price divided by the total amount of stock moved.
</div>




        
    
    
</dd>

        </dl>
    

    

    
</article>

</section>




				</div>

				<div class="clearfix"></div>
				<footer>
					
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a>
		on Wed Jul 30 2014 09:20:43 GMT-0400 (EDT) using the <a href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<div class="span3">
				<div id="toc"></div>
			</div>
			
			<br clear="both">
		</div>

	</div>
	<script src="scripts/sunlight.js"></script>
	<script src="scripts/sunlight.javascript.js"></script>
	<script src="scripts/sunlight-plugin.doclinks.js"></script>
	<script src="scripts/sunlight-plugin.linenumbers.js"></script>
	<script src="scripts/sunlight-plugin.menu.js"></script>
	<script src="scripts/jquery.min.js"></script>
	<script src="scripts/jquery.scrollTo.js"></script>
	<script src="scripts/jquery.localScroll.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>


	<script>  Sunlight.highlightAll({lineNumbers:true,  showMenu: true, enableDoclinks :true}); </script>

	<script>
		$( function () {
			$( "#toc" ).toc( {
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : 60
			} );
			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );

		} );
	</script>

	
	<script>
		$( function () {
			$('#main').localScroll({
				offset: { top: 56 } //offset by the height of your header (give or take a few px, see what works for you)
			});
			$( "dt h4.name" ).each( function () {
				var $this = $( this );
				var icon = $( "<i/>" ).addClass( "icon-plus-sign" ).addClass( "pull-right" ).addClass( "icon-white" );
				var dt = $this.parents( "dt" );
				var children = dt.next( "dd" );

				$this.append( icon ).css( {cursor : "pointer"} );
				$this.addClass( "member-collapsed" ).addClass( "member" );

				children.hide();
				$this.toggle( function () {
					icon.addClass( "icon-minus-sign" ).removeClass( "icon-plus-sign" ).removeClass( "icon-white" );
					$this.addClass( "member-open" ).removeClass( "member-collapsed" );
					children.slideDown();
				}, function () {
					icon.addClass( "icon-plus-sign" ).removeClass( "icon-minus-sign" ).addClass( "icon-white" );
					$this.addClass( "member-collapsed" ).removeClass( "member-open" );
					children.slideUp();
				} );
			} );
		} );
	</script>
	

</body>
</html>